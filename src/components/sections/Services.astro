---
import Container from "../elements/Container.astro";
import Title from "../elements/Title.astro";
import data from "../../utils/data/serviciosData.json";
import ServicesCard from "../elements/ServicesCard.astro";
import ServiceCardMobile from "../elements/ServiceCardMobile.astro";
---

<section id="servicios">
  <Container className="xl:px-6 mb-6">
    <div class="w-full grid place-items-center">
      <Title
        title1="Servicios"
        className="text-[#1d1d1bde]"
        text="En ISLAY, ofrecemos una amplia gama de seguros desarrollados para proteger lo que más valoras. Con 35 años de experiencia en el mercado, estamos preparados para brindarte soluciones a medida que se adapten a tus necesidades. Nuestros servicios incluyen:"
      />
    </div>

    <!-- Cards web -->
    <div
      class="hidden lg:flex lg:gap-4 2xl:gap-8"
      data-aos="fade-up"
      data-aos-duration="2000"
      data-aos-once="true"
    >
      {data.map((item) => <ServicesCard {...item} />)}
    </div>

    <!-- Cards Tablet -->
    <div
      class="hidden md:flex lg:hidden w-full mx-auto justify-center items-center gap-4"
      data-aos="fade-up"
      data-aos-duration="2000"
      data-aos-once="true"
    >
      {
        data
          .filter((item) => item.id < 3)
          .map((item) => <ServicesCard {...item} />)
      }
    </div>
    <div
      class="hidden md:flex lg:hidden gap-4 mt-4"
      data-aos="fade-up"
      data-aos-duration="2000"
      data-aos-once="true"
    >
      {
        data
          .filter((item) => item.id > 2)
          .map((item) => <ServicesCard {...item} />)
      }
    </div>

    <!-- Cards Mobile -->
    <div
      class="flex md:hidden w-full mx-auto flex-col justify-center items-center gap-4"
      data-aos="fade-up"
      data-aos-duration="2000"
    >
      {data.map((item) => <ServiceCardMobile {...item} />)}
    </div>
  </Container>
</section>

<script>
  const cardServices = document.querySelectorAll(".card__service") as any;

  cardServices.forEach((card) => {
    card.addEventListener("mouseenter", () => {
      cardServices.forEach((c) => {
        if (c !== card) {
          c.querySelector(".content__container").style.opacity = "0";
          c.querySelector(".title__not__hover").style.opacity = "1";
        }
      });
      card.querySelector(".title__not__hover").style.opacity = "0";
    });

    card.addEventListener("mouseleave", () => {
      cardServices.forEach((c) => {
        c.querySelector(".content__container").style.opacity = "1";
        c.querySelector(".title__not__hover").style.opacity = "0";
      });
      card.querySelector(".title__not__hover").style.opacity = "0";
    });
  });
</script>
